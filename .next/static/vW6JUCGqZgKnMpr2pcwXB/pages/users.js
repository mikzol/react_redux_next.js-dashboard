(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1626:function(e,t,n){__NEXT_REGISTER_PAGE("/users",function(){return e.exports=n(1627),{page:e.exports.default}})},1627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(38)),a=l(n(1628)),o=n(222);function l(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,a,o,l){try{var i=e[o](l),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}a.default.getInitialProps=function(){var e,t=(e=r.default.mark(function e(t){var n,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,a=t.req,e.next=3,n.dispatch(o.usersOperations.load({req:a}));case 3:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){i(o,r,a,l,u,"next",e)}function u(e){i(o,r,a,l,u,"throw",e)}l(void 0)})});return function(e){return t.apply(this,arguments)}}();var u=a.default;t.default=u},1628:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(25),o=n(77),l=(r=n(1629))&&r.__esModule?r:{default:r};var i=(0,a.connect)(function(e){return{isAuthenticated:o.authSelectors.isAuthenticated(e)}},null,null,{pure:!1})(l.default);t.default=i},1629:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),a=(i(n(2)),n(34)),o=i(n(241)),l=i(n(1630));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,d(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.default.Component),n=t,(a=[{key:"render",value:function(){return this.props.isAuthenticated?r.default.createElement("div",{className:this.props.classes.layout},r.default.createElement(o.default,{container:!0,spacing:this.props.theme.main.spacing},r.default.createElement(o.default,{item:!0,xs:12},r.default.createElement(l.default,null)))):null}}])&&s(n.prototype,a),i&&s(n,i),t}(),h=(0,a.withStyles)(function(e){return{layout:{width:"100%",flex:1,padding:e.main.spacing}}},{withTheme:!0})(p);t.default=h},1630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(25),o=n(42),l=n(222),i=(r=n(1631))&&r.__esModule?r:{default:r};var u=(0,o.injectIntl)((0,a.connect)(function(e){return{users:l.usersSelectors.getList(e)}},function(e){return{onLoad:function(){return e(l.usersOperations.load())},onCreate:function(){return e(l.usersOperations.showEditModal())},onEdit:function(t){return e(l.usersOperations.showEditModal({userId:t}))},onDelete:function(t){return e(l.usersOperations.remove({id:t}))}}})(i.default));t.default=u},1631:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(n(38)),a=_(n(0)),o=(_(n(2)),_(n(8))),l=n(39),i=n(42),u=n(34),s=_(n(1632)),c=_(n(1634)),d=_(n(1636)),f=_(n(1638)),p=_(n(1640)),h=_(n(143)),m=_(n(1642)),b=_(n(1643)),v=_(n(340)),y=_(n(597)),g=_(n(1644)),E=_(n(1646));function _(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,n,r,a,o,l){try{var i=e[o](l),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C=function(t){function n(e){var t,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,(t=!(a=x(n).call(this,e))||"object"!==O(a)&&"function"!=typeof a?M(r):a).state={checkboxes:(0,l.Map)({}),actionMenuAnchor:null,isConfirmOpen:!1},t.handleActionMenuOpen=t.handleActionMenuOpen.bind(M(M(t))),t.handleActionMenuClose=t.handleActionMenuClose.bind(M(M(t))),t.handleEditAction=t.handleEditAction.bind(M(M(t))),t.handleDeleteAction=t.handleDeleteAction.bind(M(M(t))),t.handleCancelDelete=t.handleCancelDelete.bind(M(M(t))),t.handleConfirmDelete=t.handleConfirmDelete.bind(M(M(t))),t.handleCreateAction=t.handleCreateAction.bind(M(M(t))),t}var u,_,C,P,T;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(n,a.default.Component),u=n,_=[{key:"getNumTrues",value:function(){return this.state.checkboxes.toList().filter(function(e){return!0===e}).size}},{key:"handleToggleAll",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.state.checkboxes.size===this.getNumTrues()?this.setState({checkboxes:this.state.checkboxes.map(e.constant(!1))}):this.setState({checkboxes:this.state.checkboxes.map(e.constant(!0))})}},{key:"handleToggle",value:function(e,t){this.setState({checkboxes:this.state.checkboxes.set(e,t)})}},{key:"handleActionMenuOpen",value:function(e){this.setState({actionMenuAnchor:e.currentTarget})}},{key:"handleActionMenuClose",value:function(){this.setState({actionMenuAnchor:null})}},{key:"handleEditAction",value:function(){this.handleActionMenuClose(),this.props.onEdit(this.state.checkboxes.findKey(function(e){return!!e}))}},{key:"handleDeleteAction",value:function(){this.handleActionMenuClose(),this.setState({isConfirmOpen:!0})}},{key:"handleCancelDelete",value:function(){this.setState({isConfirmOpen:!1})}},{key:"handleConfirmDelete",value:(P=r.default.mark(function t(){var n=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({isConfirmOpen:!1}),t.next=3,Promise.all(e.compact(this.state.checkboxes.map(function(e,t){return e&&n.props.onDelete(t)})));case 3:this.props.onLoad();case 4:case"end":return t.stop()}},t,this)}),T=function(){var e=this,t=arguments;return new Promise(function(n,r){var a=P.apply(e,t);function o(e){S(a,n,r,o,l,"next",e)}function l(e){S(a,n,r,o,l,"throw",e)}o(void 0)})},function(){return T.apply(this,arguments)})},{key:"handleCreateAction",value:function(){this.props.onCreate()}},{key:"renderActionMenu",value:function(){return a.default.createElement(b.default,{anchorEl:this.state.actionMenuAnchor,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:!!this.state.actionMenuAnchor,onClose:this.handleActionMenuClose},a.default.createElement(v.default,{onClick:this.handleEditAction},a.default.createElement(i.FormattedMessage,{id:"USERS_EDIT_ACTION"})),a.default.createElement(v.default,{onClick:this.handleDeleteAction},a.default.createElement(i.FormattedMessage,{id:"USERS_DELETE_ACTION"})))}},{key:"render",value:function(){var e=this;return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:this.props.classes.buttons},a.default.createElement(h.default,{variant:"contained",color:"default",classes:{root:this.props.classes.button},onClick:this.handleActionMenuOpen,disabled:0===this.getNumTrues()},a.default.createElement(i.FormattedMessage,{id:"USERS_ACTION_BUTTON"}),a.default.createElement(m.default,null)),a.default.createElement(h.default,{variant:"contained",color:"primary",classes:{root:this.props.classes.button},onClick:function(){return e.handleToggleAll(!0)}},a.default.createElement(i.FormattedMessage,{id:"USERS_CLEAR_BUTTON"})),a.default.createElement(h.default,{variant:"contained",color:"secondary",classes:{root:this.props.classes.button},onClick:this.handleCreateAction},a.default.createElement(i.FormattedMessage,{id:"USERS_CREATE_BUTTON"})),this.renderActionMenu()),a.default.createElement(g.default,null),a.default.createElement(E.default,{isOpen:this.state.isConfirmOpen,title:"DELETE_USER_TITLE",text:"DELETE_USER_TEXT",cancel:"DELETE_USER_CANCEL",submit:"DELETE_USER_SUBMIT",onCancel:this.handleCancelDelete,onSubmit:this.handleConfirmDelete}),a.default.createElement(s.default,{padding:"dense"},a.default.createElement(f.default,null,a.default.createElement(p.default,null,a.default.createElement(d.default,{padding:"none",classes:{root:this.props.classes.collapsing}},a.default.createElement(y.default,{classes:{root:this.props.classes.checkbox},checked:!!this.state.checkboxes.size&&this.state.checkboxes.size===this.getNumTrues(),indeterminate:!!this.getNumTrues()&&this.state.checkboxes.size!==this.getNumTrues(),onChange:function(){return e.handleToggleAll()},value:"on"})),a.default.createElement(d.default,null,a.default.createElement(i.FormattedMessage,{id:"USERS_LOGIN_COLUMN"})),a.default.createElement(d.default,null,a.default.createElement(i.FormattedMessage,{id:"USERS_ROLES_COLUMN"})))),a.default.createElement(c.default,null,this.props.users.map(function(t,n){return a.default.createElement(p.default,{key:"row-".concat(n)},a.default.createElement(d.default,{padding:"none",className:(0,o.default)(n%2?"even":"odd",e.state.checkboxes.get(t.get("id"))&&"selected"),classes:{root:e.props.classes.collapsing}},a.default.createElement(y.default,{classes:{root:e.props.classes.checkbox},checked:!!e.state.checkboxes.get(t.get("id")),onChange:function(n){return e.handleToggle(t.get("id"),n.target.checked)},value:"on"})),a.default.createElement(d.default,{className:(0,o.default)(n%2?"even":"odd",e.state.checkboxes.get(t.get("id"))&&"selected"),component:"th",scope:"row"},t.get("login")),a.default.createElement(d.default,{className:(0,o.default)(n%2?"even":"odd",e.state.checkboxes.get(t.get("id"))&&"selected")},t.get("roles").toJS().map(function(t){return e.props.intl.formatMessage({id:"EDIT_USER_".concat(t,"_LABEL")})}).join(", ")))}))))}}],C=[{key:"getDerivedStateFromProps",value:function(e,t){if(t.hash===e.users.hashCode())return null;var n=(0,l.Map)({}),r=!0,a=!1,o=void 0;try{for(var i,u=e.users.values()[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var s=i.value;n=n.set(s.get("id"),!!t.checkboxes.has(s.get("id"))&&t.checkboxes.get(s.get("id")))}}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return{hash:e.users.hashCode(),checkboxes:n}}}],_&&w(u.prototype,_),C&&w(u,C),n}(),P=(0,u.withStyles)(function(){return{checkbox:{padding:"0.5rem"},buttons:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignContent:"stretch"},button:{margin:"0.5rem"},collapsing:{width:1}}},{withTheme:!0})(C);t.default=P}).call(this,n(23))},1632:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(1633))},1633:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(4)),o=r(n(5)),l=r(n(0)),i=(r(n(2)),r(n(8))),u=r(n(7)),s=r(n(598)),c=function(e){return{root:{display:"table",fontFamily:e.typography.fontFamily,width:"100%",borderCollapse:"collapse",borderSpacing:0}}};function d(e){var t=e.classes,n=e.className,r=e.component,u=e.padding,c=(0,o.default)(e,["classes","className","component","padding"]);return l.default.createElement(s.default.Provider,{value:{padding:u}},l.default.createElement(r,(0,a.default)({className:(0,i.default)(t.root,n)},c)))}t.styles=c,d.propTypes={},d.defaultProps={component:"table",padding:"default"};var f=(0,u.default)(c,{name:"MuiTable"})(d);t.default=f},1634:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(1635))},1635:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(4)),o=r(n(5)),l=r(n(0)),i=(r(n(2)),r(n(8))),u=r(n(7)),s=r(n(244)),c={root:{display:"table-row-group"}};function d(e){var t=e.classes,n=e.className,r=e.component,u=(0,o.default)(e,["classes","className","component"]);return l.default.createElement(s.default.Provider,{value:{variant:"body"}},l.default.createElement(r,(0,a.default)({className:(0,i.default)(t.root,n)},u)))}t.styles=c,d.propTypes={},d.defaultProps={component:"tbody"};var f=(0,u.default)(c,{name:"MuiTableBody"})(d);t.default=f},1636:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(1637))},1637:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(4)),o=r(n(9)),l=r(n(5)),i=r(n(0)),u=(r(n(2)),r(n(8))),s=r(n(7)),c=n(28),d=n(198),f=r(n(598)),p=r(n(244)),h=function(e){return{root:{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?(0,d.lighten)((0,d.fade)(e.palette.divider,1),.88):(0,d.darken)((0,d.fade)(e.palette.divider,1),.68)),textAlign:"left",padding:"4px 56px 4px 24px","&:last-child":{paddingRight:24}},head:{color:e.palette.text.secondary,fontSize:e.typography.pxToRem(12),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary,fontSize:e.typography.pxToRem(13),fontWeight:e.typography.fontWeightRegular},footer:{borderBottom:0,color:e.palette.text.secondary,fontSize:e.typography.pxToRem(12)},numeric:{textAlign:"right",flexDirection:"row-reverse"},paddingDense:{paddingRight:24},paddingCheckbox:{padding:"0 12px","&:last-child":{paddingRight:12}},paddingNone:{padding:0,"&:last-child":{padding:0}}}};function m(e){var t=e.children,n=e.classes,r=e.className,s=e.component,d=e.sortDirection,h=e.numeric,m=e.padding,b=e.scope,v=e.variant,y=(0,l.default)(e,["children","classes","className","component","sortDirection","numeric","padding","scope","variant"]);return i.default.createElement(f.default.Consumer,null,function(e){return i.default.createElement(p.default.Consumer,null,function(l){var f,p;p=s||(l&&"head"===l.variant?"th":"td");var g=b;!g&&l&&"head"===l.variant&&(g="col");var E=m||(e&&e.padding?e.padding:"default"),_=(0,u.default)(n.root,(f={},(0,o.default)(f,n.head,v?"head"===v:l&&"head"===l.variant),(0,o.default)(f,n.body,v?"body"===v:l&&"body"===l.variant),(0,o.default)(f,n.footer,v?"footer"===v:l&&"footer"===l.variant),(0,o.default)(f,n.numeric,h),(0,o.default)(f,n["padding".concat((0,c.capitalize)(E))],"default"!==E),f),r),O=null;return d&&(O="asc"===d?"ascending":"descending"),i.default.createElement(p,(0,a.default)({className:_,"aria-sort":O,scope:g},y),t)})})}t.styles=h,m.propTypes={},m.defaultProps={numeric:!1};var b=(0,s.default)(h,{name:"MuiTableCell"})(m);t.default=b},1638:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(1639))},1639:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(4)),o=r(n(5)),l=r(n(0)),i=(r(n(2)),r(n(8))),u=r(n(7)),s=r(n(244)),c={root:{display:"table-header-group"}};function d(e){var t=e.classes,n=e.className,r=e.component,u=(0,o.default)(e,["classes","className","component"]);return l.default.createElement(s.default.Provider,{value:{variant:"head"}},l.default.createElement(r,(0,a.default)({className:(0,i.default)(t.root,n)},u)))}t.styles=c,d.propTypes={},d.defaultProps={component:"thead"};var f=(0,u.default)(c,{name:"MuiTableHead"})(d);t.default=f},1640:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(1641))},1641:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(4)),o=r(n(9)),l=r(n(5)),i=r(n(0)),u=(r(n(2)),r(n(8))),s=r(n(7)),c=r(n(244)),d=function(e){return{root:{color:"inherit",display:"table-row",height:48,verticalAlign:"middle",outline:"none","&$selected":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.08)"},"&$hover:hover":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.07)":"rgba(255, 255, 255, 0.14)"}},selected:{},hover:{},head:{height:56},footer:{height:56}}};function f(e){var t=e.classes,n=e.className,r=e.component,s=e.hover,d=e.selected,f=(0,l.default)(e,["classes","className","component","hover","selected"]);return i.default.createElement(c.default.Consumer,null,function(e){var l,c=(0,u.default)(t.root,(l={},(0,o.default)(l,t.head,e&&"head"===e.variant),(0,o.default)(l,t.footer,e&&"footer"===e.variant),(0,o.default)(l,t.hover,s),(0,o.default)(l,t.selected,d),l),n);return i.default.createElement(r,(0,a.default)({className:c},f))})}t.styles=d,f.propTypes={},f.defaultProps={component:"tr",hover:!1,selected:!1};var p=(0,s.default)(d,{name:"MuiTableRow"})(f);t.default=p},1642:function(e,t,n){"use strict";var r=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),o=(0,r(n(51)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),a.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"})),"KeyboardArrowDown");t.default=o},1643:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(523))},1644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(38)),a=n(39),o=n(42),l=n(86),i=n(546),u=n(222),s=d(n(583)),c=d(n(1645));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r,a,o,l){try{var i=e[o](l),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=c.default.formName,m=(0,o.injectIntl)((0,s.default)(c.default,function(e){return{fieldValues:p({},h,(0,l.getFormValues)(h)(e)||(0,a.Map)()),fieldErrors:p({},h,(0,l.getFormAsyncErrors)(h)(e)||(0,a.Map)()),data:u.usersSelectors.getEditModalData(e),isOpen:u.usersSelectors.isEditModalOpen(e)}},function(e){return{dispatch:e,updateValidation:(t=r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e((0,i.startAsyncValidation)(h));case 2:return t.next=4,e((0,i.stopAsyncValidation)(h,n));case 4:case"end":return t.stop()}},t,this)}),n=function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function l(e){f(o,r,a,l,i,"next",e)}function i(e){f(o,r,a,l,i,"throw",e)}l(void 0)})},function(e){return n.apply(this,arguments)}),onCancel:function(){return e(u.usersOperations.hideEditModal())},onLoad:function(){return e(u.usersOperations.load())},onCreate:function(t,n,r,a){return e(u.usersOperations.create({login:t,password:n,isAdmin:r,isCallCenter:a}))},onEdit:function(t,n,r,a,o){return e(u.usersOperations.edit({id:t,login:n,password:r,isAdmin:a,isCallCenter:o}))}};var t,n}));t.default=m},1645:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(n(38)),a=_(n(0)),o=_(n(2)),l=n(39),i=n(42),u=n(86),s=n(34),c=_(n(225)),d=_(n(226)),f=_(n(227)),p=_(n(353)),h=_(n(354)),m=_(n(241)),b=_(n(143)),v=_(n(197)),y=_(n(584)),g=_(n(596)),E=_(n(62));function _(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,n,r,a,o,l){try{var i=e[o](l),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){S(o,r,a,l,i,"next",e)}function i(e){S(o,r,a,l,i,"throw",e)}l(void 0)})}}function x(e,t,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(t){var n,o;function l(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),n=this,(t=!(r=k(l).call(this,e))||"object"!==O(r)&&"function"!=typeof r?T(n):r).state={isOpen:e.isOpen,errors:null},t.handleSubmit=t.handleSubmit.bind(T(T(t))),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(l,y.default),C(l,null,[{key:"onSubmit",value:(n=w(r.default.mark(function t(n,a,o){var l,i,s,c,d,f,p,h,m,b,v,y,g,E;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.data){t.next=6;break}return t.next=3,o.onEdit(o.data.get("id"),this.getValue(o,"name")||null,this.getValue(o,"email"),this.getValue(o,"password"),"on"===this.getValue(o,"isAdmin"));case 3:l=t.sent,t.next=9;break;case 6:return t.next=8,o.onCreate(this.getValue(o,"name")||null,this.getValue(o,"email"),this.getValue(o,"password"),"on"===this.getValue(o,"isAdmin"));case 8:l=t.sent;case 9:if(!l||!e.isObject(l)){t.next=58;break}i={},s=!0,c=!1,d=void 0,t.prev=14,f=e.keys(l)[Symbol.iterator]();case 16:if(s=(p=f.next()).done){t.next=41;break}for(h=p.value,i[h]=[],m=!0,b=!1,v=void 0,t.prev=22,y=l[h][Symbol.iterator]();!(m=(g=y.next()).done);m=!0)E=g.value,i[h].push({id:E});t.next=30;break;case 26:t.prev=26,t.t0=t.catch(22),b=!0,v=t.t0;case 30:t.prev=30,t.prev=31,m||null==y.return||y.return();case 33:if(t.prev=33,!b){t.next=36;break}throw v;case 36:return t.finish(33);case 37:return t.finish(30);case 38:s=!0,t.next=16;break;case 41:t.next=47;break;case 43:t.prev=43,t.t1=t.catch(14),c=!0,d=t.t1;case 47:t.prev=47,t.prev=48,s||null==f.return||f.return();case 50:if(t.prev=50,!c){t.next=53;break}throw d;case 53:return t.finish(50);case 54:return t.finish(47);case 55:throw new u.SubmissionError(i);case 58:return t.next=60,o.onLoad();case 60:return t.abrupt("return",l);case 61:case"end":return t.stop()}},t,this,[[14,43,47,55],[22,26,30,38],[31,,33,37],[48,,50,54]])})),function(e,t,r){return n.apply(this,arguments)})},{key:"getDerivedStateFromProps",value:function(t,n){var r={};if(n.isOpen!==t.isOpen){var a=t.data&&t.data.get("name"),o=t.data&&t.data.get("email"),l=t.data&&t.data.get("roles").includes(E.default.roles.ADMIN);t.dispatch(t.change("name",a||"")),t.dispatch(t.change("email",o||"")),t.dispatch(t.change("password","")),t.dispatch(t.change("isAdmin",l?"on":"off")),t.dispatch(t.clearAsyncError("_")),r.isOpen=t.isOpen,r.errors=null}return t.error&&t.error.has("_")?r.errors=t.error.get("_"):t.error&&t.error.has("_")||(r.errors=null),e.keys(r).length?r:null}}]),C(l,[{key:"handleSubmit",value:(o=w(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({errors:null}),e.next=3,x(k(l.prototype),"submit",this).call(this);case 3:if(e.t0=!e.sent,!e.t0){e.next=6;break}e.t0=!this.state.errors;case 6:if(!e.t0){e.next=8;break}this.setState({errors:["EDIT_USER_FAILED"]});case 8:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"render",value:function(){var t=this;return a.default.createElement(c.default,{maxWidth:"xs",fullWidth:!0,classes:{paper:this.props.classes.paper},open:this.props.isOpen,onClose:this.props.onCancel},a.default.createElement(h.default,null,a.default.createElement(i.FormattedMessage,{id:this.props.data?"EDIT_USER_TITLE_EDIT":"EDIT_USER_TITLE_CREATE"})),this.state.errors&&a.default.createElement(f.default,null,e.map(this.state.errors,function(e,n){return a.default.createElement(p.default,{key:"error-".concat(n),classes:{root:t.props.classes.error}},a.default.createElement(i.FormattedMessage,{id:e}))})),a.default.createElement(f.default,null,a.default.createElement(m.default,{container:!0,spacing:16,component:"form",noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit},a.default.createElement(m.default,{item:!0,xs:12},a.default.createElement(g.default,{formFields:this.constructor.fields,formProps:this.props,name:"name",type:"text",onSubmit:this.handleSubmit})),a.default.createElement(m.default,{item:!0,xs:12},a.default.createElement(g.default,{formFields:this.constructor.fields,formProps:this.props,name:"email",type:"text",onSubmit:this.handleSubmit})),a.default.createElement(m.default,{item:!0,xs:12},a.default.createElement(g.default,{formFields:this.constructor.fields,formProps:this.props,name:"password",type:"password",onSubmit:this.handleSubmit})),a.default.createElement(m.default,{item:!0,xs:12},a.default.createElement(g.default,{formFields:this.constructor.fields,formProps:this.props,name:"isAdmin",type:"checkbox",onSubmit:this.handleSubmit})))),a.default.createElement(d.default,{classes:{root:this.props.classes.actions}},a.default.createElement(b.default,{variant:"contained",color:"primary",disabled:this.props.submitting,onClick:this.props.onCancel},a.default.createElement(i.FormattedMessage,{id:"EDIT_USER_CANCEL"})),a.default.createElement(b.default,{variant:"contained",color:"secondary",disabled:this.props.submitting,onClick:this.handleSubmit},a.default.createElement(i.FormattedMessage,{id:"EDIT_USER_SUBMIT"}))))}}]),l}();j(A,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){j(e,t,n[t])})}return e}({},y.default.propTypes,{intl:i.intlShape,theme:o.default.object.isRequired,classes:o.default.object.isRequired,isOpen:o.default.bool.isRequired,data:o.default.instanceOf(l.Map),onCancel:o.default.func.isRequired,onLoad:o.default.func.isRequired,onCreate:o.default.func.isRequired,onEdit:o.default.func.isRequired})),j(A,"formName","editUserForm"),j(A,"fields",{name:{label:"EDIT_USER_NAME_LABEL"},email:{normalize:"rows:1|remove:spaces",transform:"trim",validate:"required|email",label:"EDIT_USER_EMAIL_LABEL"},password:{label:"EDIT_USER_PASSWORD_LABEL"},isAdmin:{label:"EDIT_USER_ADMIN_LABEL"}});var R=(0,s.withStyles)(function(e){return{paper:{background:e.main.background},error:{color:v.default[500]},actions:{paddingLeft:"1rem",paddingRight:"1rem",paddingBottom:"1rem"}}},{withTheme:!0})(A);t.default=R}).call(this,n(23))},1646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(0)),a=(f(n(2)),n(42)),o=n(34),l=f(n(225)),i=f(n(226)),u=f(n(227)),s=f(n(353)),c=f(n(354)),d=f(n(143));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,b(t).apply(this,arguments))}var n,o,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r.default.PureComponent),n=t,(o=[{key:"render",value:function(){return r.default.createElement(l.default,{maxWidth:"xs",fullWidth:!0,classes:{paper:this.props.classes.paper},open:this.props.isOpen,onClose:this.props.onCancel},r.default.createElement(c.default,null,r.default.createElement(a.FormattedMessage,{id:this.props.title})),r.default.createElement(u.default,null,r.default.createElement(s.default,null,r.default.createElement(a.FormattedMessage,{id:this.props.text,values:this.props.values}))),r.default.createElement(i.default,{classes:{root:this.props.classes.actions}},r.default.createElement(d.default,{variant:"contained",color:"primary",onClick:this.props.onCancel},r.default.createElement(a.FormattedMessage,{id:this.props.cancel})),r.default.createElement(d.default,{variant:"contained",color:"secondary",onClick:this.props.onSubmit},r.default.createElement(a.FormattedMessage,{id:this.props.submit}))))}}])&&h(n.prototype,o),f&&h(n,f),t}(),g=(0,o.withStyles)(function(e){return{paper:{background:e.main.background},actions:{paddingLeft:"1rem",paddingRight:"1rem",paddingBottom:"1rem"}}},{withTheme:!0})(y);t.default=g},244:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)).default.createContext();t.default=a},598:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)).default.createContext();t.default=a}},[[1626,1,0]]]);