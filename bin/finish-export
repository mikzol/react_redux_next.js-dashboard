#!/usr/bin/env node

/**
 * Additional processing of out/ directory (for static exports)
 */

"use strict";

const fs = require("fs-extra");
const path = require("path");

const root = path.join.bind(path, path.resolve(__dirname), "..");

async function finishExport() {
  await fs.writeFile(
    root("out/_headers"),
    `# Netlify caching
[[headers]]
  for = "*.js" 
  [headers.values]
    Cache-Control = "public, max-age=864000"
[[headers]]
  for = "*.css" 
  [headers.values]
    Cache-Control = "public, max-age=864000"
`
  );
}

finishExport().catch(error => {
  console.error(error);
  process.exit(1);
});
