(window.webpackJsonp=window.webpackJsonp||[]).push([["bf08"],{"2yTz":function(e,t,a){"use strict";a.r(t);var n=a("bqsI");a.d(t,"default",function(){return n.a})},"9Asn":function(e,t,a){"use strict";var n,r={kind:"Fragment",name:"ProfileContainer_viewer",type:"Viewer",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"me",storageKey:null,args:null,concreteType:"Status",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isAuthenticated",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"email",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isEmailVerified",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"roles",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"providers",storageKey:null,args:null,concreteType:"ProviderStatus",plural:!0,selections:[n,{kind:"ScalarField",alias:null,name:"isLinked",args:null,storageKey:null}]}]}]};r.hash="d3e89f916095b5468e8e2f66d9f845e0",e.exports=r},Hefa:function(e,t,a){"use strict";var n=a("KI45");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.query=void 0;var r=n(a("ln6h")),l=n(a("+oT+")),i=n(a("/HRN")),s=n(a("WaGi")),u=n(a("ZDA2")),o=n(a("/+P4")),d=n(a("N9n2")),c=n(a("q1tI")),f=(a("Ku+5"),a("5upH")),m=n(a("LlNd")),p=n(a("hl3i")),g=n(a("wkow")),v={},y=function(){return a("Q83a")};t.query=y;var h=function(e){function t(){return(0,i.default)(this,t),(0,u.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,d.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return c.default.createElement(f.QueryRenderer,{query:y,variables:v,render:function(e){var t=e.error,a=e.props;return c.default.createElement(p.default,{page:"/auth/profile",viewer:a?a.viewer:null,error:t},!t&&!a&&c.default.createElement(g.default,null),!t&&a&&c.default.createElement(m.default,{viewer:a.viewer}))}})}}],[{key:"getInitialProps",value:function(){var e=(0,l.default)(r.default.mark(function e(t){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.fetchQuery,e.next=3,a(y,v);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),t}(c.default.Component);t.default=h},LlNd:function(e,t,a){"use strict";var n=a("5Uuq");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("/MKj"),l=a("04ZO"),i=a("XiiD"),s=a("Ku+5"),u=n(a("OcY6")),o=(0,s.createRefetchContainer)((0,r.connect)(null,function(e){return{onSave:function(t,a,n){return e(i.appOperations.updateProfile({name:t,email:a,password:n}))},onLink:function(t){return e(i.appOperations.linkProvider({provider:t}))},onUnlink:function(t){return e(i.appOperations.unlinkProvider({provider:t}))},onVerify:function(){return e(i.appOperations.requestEmailVerification())},onDestroy:function(){return e(i.appOperations.deleteProfile())}}})((0,l.withStyles)(u.styles)((0,l.withTheme)(u.default))),{viewer:function(){return a("9Asn")}},function(){return a("Mv9G")});t.default=o},Mv9G:function(e,t,a){"use strict";var n,r={kind:"Request",fragment:{kind:"Fragment",name:"ProfileContainerQuery",type:"Query",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:"viewer",name:"__viewer_viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"ProfileContainer_viewer",args:null}]}]},operation:{kind:"Operation",name:"ProfileContainerQuery",argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"me",storageKey:null,args:null,concreteType:"Status",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isAuthenticated",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"email",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isEmailVerified",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"roles",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"providers",storageKey:null,args:null,concreteType:"ProviderStatus",plural:!0,selections:[n,{kind:"ScalarField",alias:null,name:"isLinked",args:null,storageKey:null}]}]}]},{kind:"LinkedHandle",alias:null,name:"viewer",args:null,handle:"viewer",key:"",filters:null}]},params:{operationKind:"query",name:"ProfileContainerQuery",id:null,text:"query ProfileContainerQuery {\n  viewer {\n    ...ProfileContainer_viewer\n  }\n}\n\nfragment ProfileContainer_viewer on Viewer {\n  me {\n    isAuthenticated\n    name\n    email\n    isEmailVerified\n    roles\n    providers {\n      name\n      isLinked\n    }\n  }\n}\n",metadata:{}}};r.hash="f14e1e725e3a097c2118359cdbb7f3b6",e.exports=r},N2da:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/profile",function(){var e=a("t6mg");return{page:e.default||e}}])},OcY6:function(e,t,a){"use strict";(function(e){var n=a("KI45");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var r=n(a("ln6h")),l=n(a("EY6e")),i=n(a("+oT+")),s=n(a("/HRN")),u=n(a("WaGi")),o=n(a("ZDA2")),d=n(a("/+P4")),c=n(a("K47E")),f=n(a("N9n2")),m=n(a("q1tI")),p=n(a("nOHt")),g=a("JRPe"),v=n(a("X6bi")),y=n(a("2yTz")),h=n(a("2bPE")),E=n(a("KI6R")),k=n(a("GkiB")),w=n(a("FtsS")),F=n(a("fWIC")),_=a("KH7Z"),L=n(a("uORY")),S=n(a("V5KF")),P=n(a("MmNR")),b=n(a("yh8l")),O=n(a("w1vu"));t.styles=function(e){return{layout:{width:"100%",flex:1,display:"flex",justifyContent:"center",alignItems:"center"},profile:{padding:e.spacing(2),width:"100%",maxWidth:700},destroyButton:{background:F.default[500]},title:{borderBottom:"1px dotted ".concat(e.palette.text.secondary)},error:e.main.error,info:e.main.info,serviceLogo:{marginLeft:"0.5em",marginRight:"0.5em",verticalAlign:"middle","& svg":{height:"1.8em",fill:"currentColor",verticalAlign:"middle"}},facebook:{margin:"1rem",color:e.palette.primary.contrastText,background:["#3b5998","!important"],"&:hover":{background:["#1b3978","!important"]}},google:{margin:"1rem",color:e.palette.primary.contrastText,background:["#dd4b39","!important"],"&:hover":{background:["#bd2b19","!important"]}},twitter:{margin:"1rem",color:e.palette.primary.contrastText,background:["#38A1F3","!important"],"&:hover":{background:["#1881d3","!important"]}}}};var T=function(t){function a(e){var t;return(0,s.default)(this,a),(t=(0,o.default)(this,(0,d.default)(a).call(this,e))).state={animating:!1,message:null,isConfirmOpen:!1},t.messageTimer=null,t.save=t.save.bind((0,c.default)(t)),t.verify=t.verify.bind((0,c.default)(t)),t.destroy=t.destroy.bind((0,c.default)(t)),t.handleRefreshAction=t.handleRefreshAction.bind((0,c.default)(t)),t.handleConfirmDelete=t.handleConfirmDelete.bind((0,c.default)(t)),t.handleCancelDelete=t.handleCancelDelete.bind((0,c.default)(t)),t}return(0,f.default)(a,t),(0,u.default)(a,[{key:"getUser",value:function(){return e.get(this.props.viewer,"me",{roles:[]})}},{key:"getProviders",value:function(){return e.get(this.props.viewer,"me.providers",[])}},{key:"getUserVerified",value:function(){return e.get(this.props.viewer,"me.isEmailVerified",!1)}},{key:"handleRefreshAction",value:function(){this.props.relay.refetch(null,null,null,{force:!0})}},{key:"save",value:function(){var e=(0,i.default)(r.default.mark(function e(t,a){var n,i,s,u,o,d,c,f,m,p;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,i=t.email,s=t.password1,u=a.setSubmitting,o=a.setFieldValue,d=a.setErrors,c=a.setStatus,e.next=4,this.props.onSave(n||null,i,s);case 4:!0===(f=e.sent)?(this.handleRefreshAction(),u(!1),o("password1",""),o("password2",""),this.showMessage("PROFILE_SAVE_SUCCESS")):(m=f._status,p=(0,l.default)(f,["_status"]),u(!1),d(p),c(m));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"verify",value:function(){var e=(0,i.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.onVerify();case 2:t=e.sent,this.showMessage(t?"PROFILE_VERIFY_SUCCESS":"OPERATION_FAILED");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"link",value:function(){var e=(0,i.default)(r.default.mark(function e(t){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.onLink(t);case 2:a=e.sent,this.showMessage(a?"PROFILE_LINK_SUCCESS":"OPERATION_FAILED");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"unlink",value:function(){var e=(0,i.default)(r.default.mark(function e(t){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.onUnlink(t);case 2:a=e.sent,this.showMessage(a?"PROFILE_UNLINK_SUCCESS":"OPERATION_FAILED");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=(0,i.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isConfirmOpen:!0});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleCancelDelete",value:function(){this.setState({isConfirmOpen:!1})}},{key:"handleConfirmDelete",value:function(){var e=(0,i.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isConfirmOpen:!1}),e.next=3,this.props.onDestroy();case 3:if(!e.sent){e.next=5;break}p.default.push("/");case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showMessage",value:function(e){var t=this;this.messageTimer&&clearTimeout(this.messageTimer),this.messageTimer=setTimeout(function(){t.messageTimer=null,t.setState({animating:!1},function(){t.messageTimer=setTimeout(function(){t.messageTimer=null,t.setState({message:null})},t.props.theme.transitions.duration.leavingScreen)})},5e3),this.setState({message:e,animating:!0})}},{key:"renderButton",value:function(t,a){var n=this,r=e.toLower(t.name),l=t.isLinked;return m.default.createElement(w.default,{key:t,variant:"contained",color:"default",classes:{contained:this.props.classes[r]},disabled:a,onClick:function(){return l?n.unlink(r):n.link(r)}},m.default.createElement(h.default,{xsDown:!0},m.default.createElement(g.FormattedMessage,{id:l?"PROFILE_UNLINK_BUTTON":"PROFILE_LINK_BUTTON"})),"facebook"===r&&m.default.createElement("span",{dangerouslySetInnerHTML:{__html:P.default},className:this.props.classes.serviceLogo}),"google"===r&&m.default.createElement("span",{dangerouslySetInnerHTML:{__html:b.default},className:this.props.classes.serviceLogo}),"twitter"===r&&m.default.createElement("span",{dangerouslySetInnerHTML:{__html:O.default},className:this.props.classes.serviceLogo}),e.upperFirst(r))}},{key:"render",value:function(){var t=this;return m.default.createElement("div",{className:this.props.classes.layout},m.default.createElement(v.default,{className:this.props.classes.profile},m.default.createElement(_.Form,{fields:L.default,initialValues:this.getUser(),onSubmit:this.save,render:function(a){var n=a.isSubmitting,r=a.status,l=a.handleSubmit,i=e.map(t.getProviders(),function(e){return t.renderButton(e,n)});return m.default.createElement(k.default,{container:!0,spacing:2},m.default.createElement(k.default,{item:!0,xs:12},m.default.createElement(E.default,{variant:"h4",classes:{root:t.props.classes.title}},m.default.createElement(g.FormattedMessage,{id:"TITLE_PROFILE"}))),m.default.createElement(h.default,{xsDown:!0},m.default.createElement(k.default,{item:!0,xs:12,container:!0,justify:"space-between"},i)),m.default.createElement(h.default,{smUp:!0},m.default.createElement(k.default,{item:!0,xs:12,container:!0,justify:"center"},i)),!!r&&m.default.createElement(k.default,{item:!0,xs:12},e.map(e.isArray(r)?r:[r],function(a,n){return m.default.createElement("div",{key:"error-".concat(n),className:t.props.classes.error},e.isArray(a)?m.default.createElement(g.FormattedMessage,{id:a[0],values:a[1]}):m.default.createElement(g.FormattedMessage,{id:a}))})),t.state.message&&m.default.createElement(k.default,{item:!0,xs:12},m.default.createElement(y.default,{in:t.state.animating},m.default.createElement("div",{className:t.props.classes.info},m.default.createElement(g.FormattedMessage,{id:t.state.message})))),m.default.createElement(h.default,{xsDown:!0},m.default.createElement(k.default,{item:!0,sm:6},m.default.createElement(_.Field,{name:"name",type:"text"})),m.default.createElement(k.default,{item:!0,sm:6},m.default.createElement(_.Field,{name:"password1",type:"password"})),m.default.createElement(k.default,{item:!0,sm:6},m.default.createElement(_.Field,{name:"email",type:"text"})),m.default.createElement(k.default,{item:!0,sm:6},m.default.createElement(_.Field,{name:"password2",type:"password"}))),m.default.createElement(h.default,{smUp:!0},m.default.createElement(k.default,{item:!0,xs:12},m.default.createElement(_.Field,{name:"name",type:"text"})),m.default.createElement(k.default,{item:!0,xs:12},m.default.createElement(_.Field,{name:"email",type:"text"})),m.default.createElement(k.default,{item:!0,xs:12},m.default.createElement(_.Field,{name:"password1",type:"password"})),m.default.createElement(k.default,{item:!0,xs:12},m.default.createElement(_.Field,{name:"password2",type:"password"}))),m.default.createElement(k.default,{item:!0,xs:12,container:!0,justify:"space-between"},m.default.createElement(w.default,{variant:"contained",color:"primary",disabled:n,onClick:l},m.default.createElement(g.FormattedMessage,{id:"PROFILE_SAVE_BUTTON"})),m.default.createElement(w.default,{variant:"contained",color:"inherit",className:t.props.classes.destroyButton,disabled:n,onClick:t.destroy},m.default.createElement(g.FormattedMessage,{id:"PROFILE_DESTROY_BUTTON"}))),!t.getUserVerified()&&m.default.createElement(k.default,{item:!0,xs:12,container:!0,justify:"flex-start"},m.default.createElement(w.default,{variant:"contained",color:"primary",disabled:n,onClick:t.verify},m.default.createElement(g.FormattedMessage,{id:"PROFILE_VERIFY_BUTTON"}))))}}),this.state.isConfirmOpen&&m.default.createElement(S.default,{title:"DELETE_PROFILE_TITLE",text:"DELETE_PROFILE_TEXT",cancel:"DELETE_PROFILE_CANCEL",submit:"DELETE_PROFILE_SUBMIT",onCancel:this.handleCancelDelete,onSubmit:this.handleConfirmDelete})))}}]),a}(m.default.Component);t.default=T}).call(this,a("LvDl"))},Q83a:function(e,t,a){"use strict";var n,r={kind:"Request",fragment:{kind:"Fragment",name:"ProfilePageQuery",type:"Query",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:"viewer",name:"__viewer_viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"LayoutContainer_viewer",args:null},{kind:"FragmentSpread",name:"ProfileContainer_viewer",args:null}]}]},operation:{kind:"Operation",name:"ProfilePageQuery",argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"me",storageKey:null,args:null,concreteType:"Status",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isAuthenticated",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"userId",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"email",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"roles",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"providers",storageKey:null,args:null,concreteType:"ProviderStatus",plural:!0,selections:[n,{kind:"ScalarField",alias:null,name:"isLinked",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"isEmailVerified",args:null,storageKey:null}]}]},{kind:"LinkedHandle",alias:null,name:"viewer",args:null,handle:"viewer",key:"",filters:null}]},params:{operationKind:"query",name:"ProfilePageQuery",id:null,text:"query ProfilePageQuery {\n  viewer {\n    ...LayoutContainer_viewer\n    ...ProfileContainer_viewer\n  }\n}\n\nfragment LayoutContainer_viewer on Viewer {\n  me {\n    isAuthenticated\n    userId\n    name\n    email\n    roles\n    providers {\n      name\n    }\n  }\n}\n\nfragment ProfileContainer_viewer on Viewer {\n  me {\n    isAuthenticated\n    name\n    email\n    isEmailVerified\n    roles\n    providers {\n      name\n      isLinked\n    }\n  }\n}\n",metadata:{}}};r.hash="a0c93fa74fc3d25de0b1626bf81cb37f",e.exports=r},V5KF:function(e,t,a){"use strict";var n=a("5Uuq");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("04ZO"),l=n(a("uj/t")),i=(0,r.withStyles)(l.styles)(l.default);t.default=i},fWIC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};t.default=n},t6mg:function(e,t,a){"use strict";var n=a("KI45");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=n(a("Hefa"))},uORY:function(e,t){e.exports={name:{normalize:"rows:1|compact:spaces",label:"PROFILE_NAME_LABEL",transform:"trim"},email:{normalize:"rows:1|remove:spaces",transform:"trim",validate:"required|email",label:"PROFILE_EMAIL_LABEL"},password1:{label:"PROFILE_PASSWORD1_LABEL",validate:"password"},password2:{label:"PROFILE_PASSWORD2_LABEL",validate:"password|required:password1|match:password1"}}},uSci:function(e,t,a){"use strict";a.r(t);var n=a("pVnL"),r=a.n(n),l=a("q1tI"),i=a.n(l),s=(a("17x9"),a("H2TA")),u=a("ofer"),o=i.a.forwardRef(function(e,t){return i.a.createElement(u.a,r()({component:"p",variant:"body1",color:"textSecondary",ref:t},e))}),d=Object(s.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(o);a.d(t,"default",function(){return d})},"uj/t":function(e,t,a){"use strict";var n=a("KI45");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var r=n(a("/HRN")),l=n(a("WaGi")),i=n(a("ZDA2")),s=n(a("/+P4")),u=n(a("N9n2")),o=n(a("q1tI")),d=a("JRPe"),c=n(a("HhgX")),f=n(a("ti9b")),m=n(a("jlMd")),p=n(a("uSci")),g=n(a("frSy")),v=n(a("FtsS"));t.styles=function(){return{actions:{paddingLeft:"1rem",paddingRight:"1rem",paddingBottom:"1rem"}}};var y=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return o.default.createElement(c.default,{maxWidth:"xs",open:!0,onClose:this.props.onCancel},o.default.createElement(g.default,null,o.default.createElement(d.FormattedMessage,{id:this.props.title})),o.default.createElement(m.default,null,o.default.createElement(p.default,null,o.default.createElement(d.FormattedMessage,{id:this.props.text,values:this.props.values}))),o.default.createElement(f.default,{classes:{root:this.props.classes.actions}},o.default.createElement(v.default,{variant:"contained",color:"primary",onClick:this.props.onCancel},o.default.createElement(d.FormattedMessage,{id:this.props.cancel})),o.default.createElement(v.default,{variant:"contained",color:"secondary",onClick:this.props.onSubmit},o.default.createElement(d.FormattedMessage,{id:this.props.submit}))))}}]),t}(o.default.PureComponent);t.default=y}},[["N2da","5d41","9da1"]]]);